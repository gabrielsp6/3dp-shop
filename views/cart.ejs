<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
        integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
        integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="/styles.css">
    <title>shopping cart</title>
</head>

<body>
    <div class="w-100 bg-light d-flex align-items-center justify-content-center">
        <h1>Shopping cart</h1>
        <a href="/products">
            <i class="fa-solid fa-shop justify-self-end shopping-cart"></i>
        </a>
        <a href="/">
            <i class="fa fa-home shopping-cart" aria-hidden="true"></i>
        </a>
    </div>
    <% let totalPrice = 0 %>

    <div class="cart-container">
        <form action="/order/" method="post">
            <% for(const [key, value] of Object.entries(cartArray)) {%>
            <div class="product-in-cart">
                <img src="/img/<%=value.product.image%>" alt="product image" class="product-image">
                <div class="product-info-cart">
                    <input type="text" value="<%= value.product.id%>" name="id" readonly class="hidden">
                    <div id="productId"> <%= JSON.stringify(value.product.id)%> </div>
                    <p id="productId"> <%= JSON.stringify(value.product.id)%> </p>
                    <div>
                        <%= value.product.title%>
                    </div>
                </div>

                <div class="product-info-cart">
                    Quantity:
                    <%= value.quantity %>
                    <input type="text" value="<%= value.quantity%>" name="quantity" readonly class="hidden">
                    <input type="text" value="<%= value.product.title%>" name="title" readonly class="hidden">
                </div>

                <div class="product-info-cart">
                    Price:
                    <% let price = value.product.price %>
                    <% totalPrice = totalPrice + parseInt(price) * parseInt(value.quantity) %>

                    $ <%= price %>
                </div>

            </div>
            <% } %>

    </div>

    <div class="price-tag">
        <h2>
            Total Price: $
            <%= totalPrice %>
            <input type="text" value="<%= totalPrice%>" name="price" readonly class="hidden">

        </h2>
    </div>
    <div class="address-field">
        <label for="address"> Address </label>
        <input type="text" name="address" id="" class="address-input"
            value="Str 15 noiembrie nr 22 ap 2 brasov, brasov 500096" placeholder="Enter Address" required max="200"
            min="1">
    </div>
    <div class="send-order">
        <button type="submit"> Send order</button>
    </div>
    </form>
    </div>
    <h5 id="delete-cart">
        Clear cart <i class="fa fa-trash" aria-hidden="true"></i>
    </h5>
    <script src="../js/cart-page.js" defer></script>
</body>
</html>